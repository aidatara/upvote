<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto Vote Bookmarklet</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        .container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: #4a5568;
            margin-bottom: 30px;
            font-size: 2em;
        }
        .bookmarklet-box {
            background: #f7fafc;
            border: 2px dashed #e2e8f0;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        .bookmarklet-link {
            display: block;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            text-decoration: none;
            padding: 15px 25px;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
            font-size: 16px;
            margin: 15px 0;
            transition: all 0.3s ease;
        }
        .bookmarklet-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        .instructions {
            background: #e6fffa;
            border-left: 4px solid #38b2ac;
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
        }
        .warning {
            background: #fed7d7;
            border-left: 4px solid #e53e3e;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        code {
            background: #edf2f7;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Monaco', 'Consolas', monospace;
        }
        .copy-button {
            background: #48bb78;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s ease;
        }
        .copy-button:hover {
            background: #38a169;
        }
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 12px;
            overflow-x: auto;
            margin: 10px 0;
            word-wrap: break-word;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ Auto Vote Bookmarklet</h1>
        
        <div class="instructions">
            <h3>üìã H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng:</h3>
            <ol>
                <li>K√©o th·∫£ n√∫t bookmarklet b√™n d∆∞·ªõi v√†o thanh bookmark c·ªßa tr√¨nh duy·ªát</li>
                <li>Ho·∫∑c click chu·ªôt ph·∫£i v√†o n√∫t v√† ch·ªçn "Add to bookmarks"</li>
                <li>Truy c·∫≠p trang web c·∫ßn auto vote</li>
                <li>Click v√†o bookmark ƒë√£ l∆∞u ƒë·ªÉ ch·∫°y script</li>
            </ol>
        </div>

        <div class="bookmarklet-box">
            <h3>üîñ Bookmarklet (k√©o th·∫£ v√†o thanh bookmark):</h3>
            <a href="javascript:(function(){const BUTTON_XPATH='//*[@id=%22app%22]/div/div/main/div/div/div/div/div[4]/div[1]/button[1]';function delay(ms){return new Promise(res=>setTimeout(res,ms))}function waitForWindowReady(w,timeoutMs=20000){const start=Date.now();return new Promise((resolve,reject)=>{const iv=setInterval(()=>{try{if(w.closed){clearInterval(iv);reject(new Error('Tab ƒë√£ ƒë√≥ng.'));return}const rs=w.document?.readyState;if(rs==='interactive'||rs==='complete'){clearInterval(iv);resolve()}else if(Date.now()-start>timeoutMs){clearInterval(iv);reject(new Error('Timeout ƒë·ª£i trang load'))}}catch{}},200)})}function getAllByXPathInWindow(w,xpath){try{const nodes=w.document.evaluate(xpath,w.document,null,w.XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);const results=[];for(let i=0;i<nodes.snapshotLength;i++){results.push(nodes.snapshotItem(i))}return results}catch{return[]}}async function clickIfNeededInWindow(w,btn){if(!btn){console.log('‚ùå Kh√¥ng t√¨m th·∫•y button');return}const cls=btn.className||'';if(cls.includes('text-gray-500')){btn.click();console.log('üëâ Ch∆∞a vote ‚Üí ƒê√É Vote')}else{console.log('‚úÖ ƒê√£ vote ‚Üí B·ªé QUA')}}async function scrollToBottomSmooth(w,maxScrolls=20,scrollDelay=500){let lastHeight=w.document.body.scrollHeight;let scrollCount=0;while(scrollCount<maxScrolls){try{w.scrollTo(0,w.document.body.scrollHeight);await delay(scrollDelay);const newHeight=w.document.body.scrollHeight;if(newHeight===lastHeight){break}lastHeight=newHeight;scrollCount++}catch(e){console.warn('‚ùå Scroll error:',e);break}}}(async()=>{console.log('‚è≥ B·∫Øt ƒë·∫ßu x·ª≠ l√Ω c√°c b√†i vi·∫øt tr√™n trang hi·ªán t·∫°i‚Ä¶');try{const worker=window;await waitForWindowReady(worker,30000);await scrollToBottomSmooth(worker,20,800);await delay(1500);const buttons=getAllByXPathInWindow(worker,BUTTON_XPATH);console.log(`üîç T√¨m th·∫•y ${buttons.length} n√∫t vote.`);for(let btn of buttons){try{await clickIfNeededInWindow(worker,btn);await delay(1200)}catch(e){console.warn('‚ö†Ô∏è L·ªói khi x·ª≠ l√Ω n√∫t:',e)}}console.log('üéâ Ho√†n t·∫•t x·ª≠ l√Ω t·∫•t c·∫£ n√∫t tr√™n trang!')}catch(e){console.error('‚ö†Ô∏è L·ªói t·ªïng th·ªÉ:',e)}})()})();" class="bookmarklet-link">
                üéØ Auto Vote Bookmarklet
            </a>
        </div>

        <div class="warning">
            <h3>‚ö†Ô∏è L∆∞u √Ω quan tr·ªçng:</h3>
            <ul>
                <li>Script n√†y s·∫Ω t·ª± ƒë·ªông t√¨m v√† click c√°c n√∫t vote tr√™n trang</li>
                <li>Ch·ªâ vote nh·ªØng n√∫t ch∆∞a ƒë∆∞·ª£c vote (c√≥ class "text-gray-500")</li>
                <li>S·∫Ω scroll t·ª± ƒë·ªông ƒë·ªÉ load th√™m n·ªôi dung</li>
                <li>M·ªü Console (F12) ƒë·ªÉ xem log chi ti·∫øt</li>
                <li>S·ª≠ d·ª•ng c√≥ tr√°ch nhi·ªám v√† tu√¢n th·ªß quy ƒë·ªãnh c·ªßa trang web</li>
            </ul>
        </div>

        <details style="margin-top: 30px;">
            <summary style="cursor: pointer; font-weight: bold; padding: 10px; background: #edf2f7; border-radius: 5px;">
                üìù Xem m√£ ngu·ªìn bookmarklet
            </summary>
            <div class="code-block" id="sourceCode">
javascript:(function(){const BUTTON_XPATH='//*[@id=%22app%22]/div/div/main/div/div/div/div/div[4]/div[1]/button[1]';function delay(ms){return new Promise(res=>setTimeout(res,ms))}function waitForWindowReady(w,timeoutMs=20000){const start=Date.now();return new Promise((resolve,reject)=>{const iv=setInterval(()=>{try{if(w.closed){clearInterval(iv);reject(new Error('Tab ƒë√£ ƒë√≥ng.'));return}const rs=w.document?.readyState;if(rs==='interactive'||rs==='complete'){clearInterval(iv);resolve()}else if(Date.now()-start>timeoutMs){clearInterval(iv);reject(new Error('Timeout ƒë·ª£i trang load'))}}catch{}},200)})}function getAllByXPathInWindow(w,xpath){try{const nodes=w.document.evaluate(xpath,w.document,null,w.XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);const results=[];for(let i=0;i<nodes.snapshotLength;i++){results.push(nodes.snapshotItem(i))}return results}catch{return[]}}async function clickIfNeededInWindow(w,btn){if(!btn){console.log('‚ùå Kh√¥ng t√¨m th·∫•y button');return}const cls=btn.className||'';if(cls.includes('text-gray-500')){btn.click();console.log('üëâ Ch∆∞a vote ‚Üí ƒê√É Vote')}else{console.log('‚úÖ ƒê√£ vote ‚Üí B·ªé QUA')}}async function scrollToBottomSmooth(w,maxScrolls=20,scrollDelay=500){let lastHeight=w.document.body.scrollHeight;let scrollCount=0;while(scrollCount<maxScrolls){try{w.scrollTo(0,w.document.body.scrollHeight);await delay(scrollDelay);const newHeight=w.document.body.scrollHeight;if(newHeight===lastHeight){break}lastHeight=newHeight;scrollCount++}catch(e){console.warn('‚ùå Scroll error:',e);break}}}(async()=>{console.log('‚è≥ B·∫Øt ƒë·∫ßu x·ª≠ l√Ω c√°c b√†i vi·∫øt tr√™n trang hi·ªán t·∫°i‚Ä¶');try{const worker=window;await waitForWindowReady(worker,30000);await scrollToBottomSmooth(worker,20,800);await delay(1500);const buttons=getAllByXPathInWindow(worker,BUTTON_XPATH);console.log(`üîç T√¨m th·∫•y ${buttons.length} n√∫t vote.`);for(let btn of buttons){try{await clickIfNeededInWindow(worker,btn);await delay(1200)}catch(e){console.warn('‚ö†Ô∏è L·ªói khi x·ª≠ l√Ω n√∫t:',e)}}console.log('üéâ Ho√†n t·∫•t x·ª≠ l√Ω t·∫•t c·∫£ n√∫t tr√™n trang!')}catch(e){console.error('‚ö†Ô∏è L·ªói t·ªïng th·ªÉ:',e)}})()})();
            </div>
            <button class="copy-button" onclick="copyToClipboard()">üìã Copy m√£ ngu·ªìn</button>
        </details>

        <div style="text-align: center; margin-top: 30px; color: #718096;">
            <p>üí° Script ƒë∆∞·ª£c t·ªëi ∆∞u h√≥a ƒë·ªÉ ho·∫°t ƒë·ªông ·ªïn ƒë·ªãnh v√† an to√†n</p>
        </div>
    </div>

    <script>
        function copyToClipboard() {
            const code = document.getElementById('sourceCode').textContent;
            navigator.clipboard.writeText(code).then(() => {
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = '‚úÖ ƒê√£ copy!';
                btn.style.background = '#48bb78';
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = '#48bb78';
                }, 2000);
            }).catch(err => {
                console.error('L·ªói copy:', err);
                alert('Kh√¥ng th·ªÉ copy t·ª± ƒë·ªông. Vui l√≤ng copy th·ªß c√¥ng.');
            });
        }
    </script>
</body>
</html>
